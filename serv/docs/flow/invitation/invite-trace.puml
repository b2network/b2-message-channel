@startuml

note right
    黄色表示有交互数据库的操作
    红色表示跟keycloak服务有交互的操作
end note
start
:解析、校验参数;
if (token无效?) then (yes)
    :提示token失效;
    stop
endif
if (id不为空?) then (yes)
    #yellow:通过uuid查询用户记录;
endif
if (username不为空?) then (yes)
    #yellow:通过username查询用户记录;
endif
if (用户记录未找到?) then (yes)
    :返回用户不存在错误;
    stop
endif
#yellow:查询邀请记录表，注册用户id为用户记录uuid，深度 == depth;
:返回结果数据;
stop
@enduml